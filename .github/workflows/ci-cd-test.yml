name: ci\cd_test

run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: 
    push:
      branches: 
        - main
        - test
jobs:
  deploy-test:
    if: github.ref == 'refs/heads/test'
    runs-on: self-hosted
    steps: 
      - name: Check out repository code
        uses: actions/checkout@v5
      - run: docker compose -p test_bot  down
      - run: docker compose -f compose_test.yaml build  --no-cache	
      - run: docker compose -f compose_test.yaml up -d

  deploy-main:
    if: github.ref == 'refs/heads/main'
    runs-on: self-hosted
    steps: 
      - name: Check out repository code
        uses: actions/checkout@v5
      - run: docker compose -p test_bot  down
      - run: docker compose -f compose_main.yaml build  --no-cache	
      - run: docker compose -f compose_main.yaml up -d

